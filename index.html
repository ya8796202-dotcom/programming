<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>YASSER BOT — برو زجاجي مع توليد صور</title>
<meta name="theme-color" content="#0ea5e9">
<style>
  body{margin:0;font-family:"Noto Sans Arabic",sans-serif;background:#0f172a;color:#fff;display:flex;flex-direction:column;height:100vh}
  header{background:#1f2937;padding:10px;display:flex;justify-content:space-between;align-items:center}
  .btn{padding:6px 12px;border:none;border-radius:6px;cursor:pointer;margin:0 4px}
  .btn.primary{background:#0ea5e9;color:#fff}
  .btn.secondary{background:#374151;color:#fff}
  #messages{flex:1;overflow:auto;padding:10px}
  .bubble{margin:6px;padding:10px;border-radius:8px;max-width:70%}
  .user{background:#2563eb;margin-left:auto}
  .bot{background:#374151;margin-right:auto}
  footer{display:flex;padding:10px;background:#111827}
  textarea{flex:1;padding:8px;border-radius:6px;border:none}
</style>
</head>
<body>
<header>
  <div><strong>YASSER BOT</strong></div>
  <div>
    <button id="modeBtn" class="btn secondary">تبديل الوضع</button>
    <button id="installBtn" class="btn secondary" style="display:none">تثبيت</button>
    <button id="downloadBtn" class="btn secondary">تنزيل</button>
    <button id="clearBtn" class="btn secondary">مسح</button>
  </div>
</header>
<div id="messages"></div>
<footer>
  <textarea id="input" placeholder="اكتب رسالتك..."></textarea>
  <button id="sendBtn" class="btn primary">إرسال</button>
  <button id="imgBtn" class="btn secondary">إنشاء صورة</button>
</footer>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const sendBtn=document.getElementById('sendBtn');
  const input=document.getElementById('input');
  const messages=document.getElementById('messages');
  const modeBtn=document.getElementById('modeBtn');
  const installBtn=document.getElementById('installBtn');
  const downloadBtn=document.getElementById('downloadBtn');
  const clearBtn=document.getElementById('clearBtn');
  const imgBtn=document.getElementById('imgBtn');
  let deferredPrompt=null;

  function addBubble(text,cls){
    const div=document.createElement('div');
    div.className="bubble "+cls;
    div.textContent=text;
    messages.appendChild(div);
    messages.scrollTop=messages.scrollHeight;
  }

  function send(){
    const q=input.value.trim();
    if(!q) return;
    addBubble("أنت: "+q,'user');
    input.value="";
    setTimeout(()=>addBubble("YASSER BOT: رد ذكي على '"+q+"'",'bot'),300);
  }

  sendBtn.onclick=send;
  input.onkeydown=(e)=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();send();}};

  modeBtn.onclick=()=>document.body.classList.toggle('yellow');
  clearBtn.onclick=()=>{messages.innerHTML="";};
  downloadBtn.onclick=()=>{
    const html=document.documentElement.outerHTML;
    const blob=new Blob([html],{type:'text/html'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');a.href=url;a.download="YASSER-BOT.html";a.click();URL.revokeObjectURL(url);
  };

  window.addEventListener('beforeinstallprompt',(e)=>{
    e.preventDefault();deferredPrompt=e;installBtn.style.display='inline-block';
  });
  installBtn.onclick=async()=>{
    if(deferredPrompt){deferredPrompt.prompt();await deferredPrompt.userChoice;deferredPrompt=null;installBtn.style.display='none';}
  };

  // زر إنشاء صورة
  imgBtn.onclick=()=>{
    const desc=prompt("اكتب وصف الصورة التي تريد إنشاؤها:");
    if(!desc) return;
    addBubble("جارٍ إنشاء صورة: "+desc,'bot');
    // هنا يتم استدعاء خدمة توليد الصور (graphic_art) في النسخة الحقيقية
    // في هذا النموذج سنعرض رسالة فقط
    setTimeout(()=>addBubble("✅ تم إنشاء صورة بناءً على الوصف: "+desc,'bot'),1000);
  };

  addBubble("مرحبًا! أنا YASSER BOT برو زجاجي مع توليد صور. اكتب رسالة أو اضغط 'إنشاء صورة'.",'bot');
});
</script>
</body>
</html>
